<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Server TCP Multithread CPP: Класс XOUT</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Server TCP Multithread CPP<span id="projectnumber">&#160;0.8</span>
   </div>
   <div id="projectbrief">Многопоточный Ассинхронный TCP Сервер</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Создано системой Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Поиск','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Поиск');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Открытые члены</a> &#124;
<a href="#pro-methods">Защищенные члены</a> &#124;
<a href="#pro-attribs">Защищенные данные</a> &#124;
<a href="classXOUT-members.html">Полный список членов класса</a>  </div>
  <div class="headertitle"><div class="title">Класс XOUT</div></div>
</div><!--header-->
<div class="contents">

<p>Класс для отправки данных в сокет и приема подтверждений.  
 <a href="classXOUT.html#details">Подробнее...</a></p>

<p><code>#include &lt;<a class="el" href="serverx_8h_source.html">serverx.h</a>&gt;</code></p>
<div class="dynheader">
Граф наследования:XOUT:</div>
<div class="dyncontent">
<div class="center"><img src="classXOUT__inherit__graph.png" border="0" usemap="#aXOUT_inherit__map" alt="Inheritance graph"/></div>
<center><span class="legend">[<a href="graph_legend.html">см. легенду</a>]</span></center></div>
<div class="dynheader">
Граф связей класса XOUT:</div>
<div class="dyncontent">
<div class="center"><img src="classXOUT__coll__graph.png" border="0" usemap="#aXOUT_coll__map" alt="Collaboration graph"/></div>
<center><span class="legend">[<a href="graph_legend.html">см. легенду</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Открытые члены</h2></td></tr>
<tr class="memitem:a602ed1beff48cb0ef13203643c69aab3"><td class="memItemLeft" align="right" valign="top"><a id="a602ed1beff48cb0ef13203643c69aab3" name="a602ed1beff48cb0ef13203643c69aab3"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>XOUT</b> (SOCKET fd)</td></tr>
<tr class="separator:a602ed1beff48cb0ef13203643c69aab3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0662e9eb15e9b457cd9876be62f56bd9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="serverx_8h.html#a937d4dd628a8858b443a399410d2600b">result</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXOUT.html#a0662e9eb15e9b457cd9876be62f56bd9">SendMsg</a> (char msg[], int size)</td></tr>
<tr class="memdesc:a0662e9eb15e9b457cd9876be62f56bd9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Отправка сообщений.  <a href="classXOUT.html#a0662e9eb15e9b457cd9876be62f56bd9">Подробнее...</a><br /></td></tr>
<tr class="separator:a0662e9eb15e9b457cd9876be62f56bd9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8eeace268597c6fe6fb79d9b7a79116"><td class="memItemLeft" align="right" valign="top"><a class="el" href="serverx_8h.html#a937d4dd628a8858b443a399410d2600b">result</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXOUT.html#ac8eeace268597c6fe6fb79d9b7a79116">RecvAck</a> ()</td></tr>
<tr class="memdesc:ac8eeace268597c6fe6fb79d9b7a79116"><td class="mdescLeft">&#160;</td><td class="mdescRight">Считывание подтверждений.  <a href="classXOUT.html#ac8eeace268597c6fe6fb79d9b7a79116">Подробнее...</a><br /></td></tr>
<tr class="separator:ac8eeace268597c6fe6fb79d9b7a79116"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-methods" name="pro-methods"></a>
Защищенные члены</h2></td></tr>
<tr class="memitem:ad746cbfd1da73fac6aac72d47821b5c8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structmsgrec__t.html">msgrec_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXOUT.html#ad746cbfd1da73fac6aac72d47821b5c8">getfreerec</a> (void)</td></tr>
<tr class="memdesc:ad746cbfd1da73fac6aac72d47821b5c8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Поиск свободной записи.  <a href="classXOUT.html#ad746cbfd1da73fac6aac72d47821b5c8">Подробнее...</a><br /></td></tr>
<tr class="separator:ad746cbfd1da73fac6aac72d47821b5c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34059d980b492406e208100b3ed1526b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structmsgrec__t.html">msgrec_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXOUT.html#a34059d980b492406e208100b3ed1526b">findmsgrec</a> (u_int32_t)</td></tr>
<tr class="memdesc:a34059d980b492406e208100b3ed1526b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Поиск записи с заданным признаком сообщения.  <a href="classXOUT.html#a34059d980b492406e208100b3ed1526b">Подробнее...</a><br /></td></tr>
<tr class="separator:a34059d980b492406e208100b3ed1526b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04006f3081379f6f5d962d34b66c3a6c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXOUT.html#a04006f3081379f6f5d962d34b66c3a6c">freemsgrec</a> (<a class="el" href="structmsgrec__t.html">msgrec_t</a> *)</td></tr>
<tr class="memdesc:a04006f3081379f6f5d962d34b66c3a6c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Освобождение сообщения.  <a href="classXOUT.html#a04006f3081379f6f5d962d34b66c3a6c">Подробнее...</a><br /></td></tr>
<tr class="separator:a04006f3081379f6f5d962d34b66c3a6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a670113cab0d34110bb0f458800e53303"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classXOUT.html#a670113cab0d34110bb0f458800e53303">drop</a> (<a class="el" href="structmsgrec__t.html">msgrec_t</a> *)</td></tr>
<tr class="memdesc:a670113cab0d34110bb0f458800e53303"><td class="mdescLeft">&#160;</td><td class="mdescRight">Отбрасывание записи.  <a href="classXOUT.html#a670113cab0d34110bb0f458800e53303">Подробнее...</a><br /></td></tr>
<tr class="separator:a670113cab0d34110bb0f458800e53303"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a762c31e025feecde60af6721c7109d5f"><td class="memItemLeft" align="right" valign="top"><a id="a762c31e025feecde60af6721c7109d5f" name="a762c31e025feecde60af6721c7109d5f"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>setTimeOut</b> (long time)</td></tr>
<tr class="memdesc:a762c31e025feecde60af6721c7109d5f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Инициализация поля новым значением времени. <br /></td></tr>
<tr class="separator:a762c31e025feecde60af6721c7109d5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b027362a06c3937a4606147d5ddaa5a"><td class="memItemLeft" align="right" valign="top"><a id="a8b027362a06c3937a4606147d5ddaa5a" name="a8b027362a06c3937a4606147d5ddaa5a"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>setTimeOutMax</b> (long time)</td></tr>
<tr class="memdesc:a8b027362a06c3937a4606147d5ddaa5a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Инициализация полем максимума новым значением времени. <br /></td></tr>
<tr class="separator:a8b027362a06c3937a4606147d5ddaa5a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-attribs" name="pro-attribs"></a>
Защищенные данные</h2></td></tr>
<tr class="memitem:a68b6fd6c34f9104f693b4f7b0117a923"><td class="memItemLeft" align="right" valign="top"><a id="a68b6fd6c34f9104f693b4f7b0117a923" name="a68b6fd6c34f9104f693b4f7b0117a923"></a>
SOCKET&#160;</td><td class="memItemRight" valign="bottom"><b>fdxout</b></td></tr>
<tr class="memdesc:a68b6fd6c34f9104f693b4f7b0117a923"><td class="mdescLeft">&#160;</td><td class="mdescRight">Сокет. <br /></td></tr>
<tr class="separator:a68b6fd6c34f9104f693b4f7b0117a923"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab223e6f4da6c491b86218f25ca418ac0"><td class="memItemLeft" align="right" valign="top"><a id="ab223e6f4da6c491b86218f25ca418ac0" name="ab223e6f4da6c491b86218f25ca418ac0"></a>
<a class="el" href="structmsgrec__t.html">msgrec_t</a>&#160;</td><td class="memItemRight" valign="bottom"><b>mr</b> [MRSZ]</td></tr>
<tr class="memdesc:ab223e6f4da6c491b86218f25ca418ac0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Массив содержащий неподтвержденные сообщения OUT. <br /></td></tr>
<tr class="separator:ab223e6f4da6c491b86218f25ca418ac0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04ba4b67b5e2661118f7762074d83da1"><td class="memItemLeft" align="right" valign="top"><a id="a04ba4b67b5e2661118f7762074d83da1" name="a04ba4b67b5e2661118f7762074d83da1"></a>
u_int32_t&#160;</td><td class="memItemRight" valign="bottom"><b>cn_ack_out</b></td></tr>
<tr class="memdesc:a04ba4b67b5e2661118f7762074d83da1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Получено ack в OUT. <br /></td></tr>
<tr class="separator:a04ba4b67b5e2661118f7762074d83da1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8e83761f4d6fa9a2fb5a1ffc95f1e2a"><td class="memItemLeft" align="right" valign="top"><a id="aa8e83761f4d6fa9a2fb5a1ffc95f1e2a" name="aa8e83761f4d6fa9a2fb5a1ffc95f1e2a"></a>
unsigned int&#160;</td><td class="memItemRight" valign="bottom"><b>mid</b></td></tr>
<tr class="memdesc:aa8e83761f4d6fa9a2fb5a1ffc95f1e2a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Переменная для признака сообщения для OUT. <br /></td></tr>
<tr class="separator:aa8e83761f4d6fa9a2fb5a1ffc95f1e2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6ec1e779b44484fb2ebdffa853a7f07"><td class="memItemLeft" align="right" valign="top"><a id="ac6ec1e779b44484fb2ebdffa853a7f07" name="ac6ec1e779b44484fb2ebdffa853a7f07"></a>
struct timeval&#160;</td><td class="memItemRight" valign="bottom"><b>end</b></td></tr>
<tr class="memdesc:ac6ec1e779b44484fb2ebdffa853a7f07"><td class="mdescLeft">&#160;</td><td class="mdescRight">Переменная - конец передачи сообщения OUT. <br /></td></tr>
<tr class="separator:ac6ec1e779b44484fb2ebdffa853a7f07"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc5ae88cf34a543f1a0faefb4bcd3cfc"><td class="memItemLeft" align="right" valign="top"><a id="acc5ae88cf34a543f1a0faefb4bcd3cfc" name="acc5ae88cf34a543f1a0faefb4bcd3cfc"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>cnt</b></td></tr>
<tr class="memdesc:acc5ae88cf34a543f1a0faefb4bcd3cfc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Остаток сообщения размера для OUT. <br /></td></tr>
<tr class="separator:acc5ae88cf34a543f1a0faefb4bcd3cfc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae9772f3833badb4b0bc05b4d6b2b2bcd"><td class="memItemLeft" align="right" valign="top"><a id="ae9772f3833badb4b0bc05b4d6b2b2bcd" name="ae9772f3833badb4b0bc05b4d6b2b2bcd"></a>
unsigned int&#160;</td><td class="memItemRight" valign="bottom"><b>msgid</b></td></tr>
<tr class="memdesc:ae9772f3833badb4b0bc05b4d6b2b2bcd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Отправлено всего сообщений клиенту OUT. <br /></td></tr>
<tr class="separator:ae9772f3833badb4b0bc05b4d6b2b2bcd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a567ef024ebe5565c36322fcd5758f1dc"><td class="memItemLeft" align="right" valign="top"><a id="a567ef024ebe5565c36322fcd5758f1dc" name="a567ef024ebe5565c36322fcd5758f1dc"></a>
char&#160;</td><td class="memItemRight" valign="bottom"><b>ack</b> [ACKSZ]</td></tr>
<tr class="memdesc:a567ef024ebe5565c36322fcd5758f1dc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Сообщение ACK для OUT. <br /></td></tr>
<tr class="separator:a567ef024ebe5565c36322fcd5758f1dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a924c9f1da54af3d282fc834f98ec5071"><td class="memItemLeft" align="right" valign="top"><a id="a924c9f1da54af3d282fc834f98ec5071" name="a924c9f1da54af3d282fc834f98ec5071"></a>
long&#160;</td><td class="memItemRight" valign="bottom"><b>sr_time</b></td></tr>
<tr class="memdesc:a924c9f1da54af3d282fc834f98ec5071"><td class="mdescLeft">&#160;</td><td class="mdescRight">Время от отправки сообщения до получения акта общее среднее. <br /></td></tr>
<tr class="separator:a924c9f1da54af3d282fc834f98ec5071"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6bd98b0498bde1f28adb4b95980b83d2"><td class="memItemLeft" align="right" valign="top"><a id="a6bd98b0498bde1f28adb4b95980b83d2" name="a6bd98b0498bde1f28adb4b95980b83d2"></a>
long&#160;</td><td class="memItemRight" valign="bottom"><b>time_out</b></td></tr>
<tr class="memdesc:a6bd98b0498bde1f28adb4b95980b83d2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Время от отправки сообщения до получения акта общее, microsec. <br /></td></tr>
<tr class="separator:a6bd98b0498bde1f28adb4b95980b83d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8154787da717a7d0c442cbf9603c2594"><td class="memItemLeft" align="right" valign="top"><a id="a8154787da717a7d0c442cbf9603c2594" name="a8154787da717a7d0c442cbf9603c2594"></a>
long&#160;</td><td class="memItemRight" valign="bottom"><b>time_out_max</b></td></tr>
<tr class="memdesc:a8154787da717a7d0c442cbf9603c2594"><td class="mdescLeft">&#160;</td><td class="mdescRight">Время от отправки сообщения до получения акта общее максимальное, microsec. <br /></td></tr>
<tr class="separator:a8154787da717a7d0c442cbf9603c2594"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43a6c7c372c9919f3b53332f2d6d9deb"><td class="memItemLeft" align="right" valign="top"><a id="a43a6c7c372c9919f3b53332f2d6d9deb" name="a43a6c7c372c9919f3b53332f2d6d9deb"></a>
<a class="el" href="classTimerManager.html">TimerManager</a>&#160;</td><td class="memItemRight" valign="bottom"><b>TimeXout</b></td></tr>
<tr class="memdesc:a43a6c7c372c9919f3b53332f2d6d9deb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Менеджер таймеров для tselect timeout. <br /></td></tr>
<tr class="separator:a43a6c7c372c9919f3b53332f2d6d9deb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Подробное описание</h2>
<div class="textblock"><p >Класс для отправки данных в сокет и приема подтверждений. </p>
</div><h2 class="groupheader">Методы</h2>
<a id="a670113cab0d34110bb0f458800e53303" name="a670113cab0d34110bb0f458800e53303"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a670113cab0d34110bb0f458800e53303">&#9670;&nbsp;</a></span>drop()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void XOUT::drop </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structmsgrec__t.html">msgrec_t</a> *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Отбрасывание записи. </p>
<p >Отбрасывает сообщение.</p>
<p >Функция отбрасывает сообщение и освобождает запись сообщения. Выводится отладочное сообщение о потерянном ACK.</p>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>Указатель на запись сообщения. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a34059d980b492406e208100b3ed1526b" name="a34059d980b492406e208100b3ed1526b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a34059d980b492406e208100b3ed1526b">&#9670;&nbsp;</a></span>findmsgrec()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structmsgrec__t.html">msgrec_t</a> * XOUT::findmsgrec </td>
          <td>(</td>
          <td class="paramtype">u_int32_t&#160;</td>
          <td class="paramname"><em>mid</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Поиск записи с заданным признаком сообщения. </p>
<p >Ищет запись сообщения по заданному идентификатору.</p>
<p >Функция ищет запись сообщения в пуле mr по заданному идентификатору. Если найдена запись с указанным идентификатором и длина сообщения не равна -1, то возвращается указатель на эту запись. Если запись не найдена, выводится отладочное сообщение и возвращается nullptr.</p>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramname">mid</td><td>Идентификатор сообщения. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Возвращает</dt><dd>Указатель на запись сообщения или nullptr. </dd></dl>

</div>
</div>
<a id="a04006f3081379f6f5d962d34b66c3a6c" name="a04006f3081379f6f5d962d34b66c3a6c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a04006f3081379f6f5d962d34b66c3a6c">&#9670;&nbsp;</a></span>freemsgrec()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void XOUT::freemsgrec </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structmsgrec__t.html">msgrec_t</a> *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Освобождение сообщения. </p>
<p >Освобождает запись сообщения.</p>
<p >Функция проверяет, что запись сообщения уже освобождена. Если запись сообщения уже освобождена, выводится ошибка. Затем устанавливается длина записи сообщения в -1.</p>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>Указатель на запись сообщения. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad746cbfd1da73fac6aac72d47821b5c8" name="ad746cbfd1da73fac6aac72d47821b5c8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad746cbfd1da73fac6aac72d47821b5c8">&#9670;&nbsp;</a></span>getfreerec()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structmsgrec__t.html">msgrec_t</a> * XOUT::getfreerec </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Поиск свободной записи. </p>
<p >Возвращает указатель на свободную запись сообщения.</p>
<p >Функция ищет свободную запись сообщения в пуле mr. Если найдена свободная запись, то возвращается указатель на нее. Если свободная запись не найдена, выводится ошибка и возвращается nullptr.</p>
<dl class="section return"><dt>Возвращает</dt><dd>Указатель на свободную запись сообщения или nullptr. </dd></dl>

</div>
</div>
<a id="ac8eeace268597c6fe6fb79d9b7a79116" name="ac8eeace268597c6fe6fb79d9b7a79116"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac8eeace268597c6fe6fb79d9b7a79116">&#9670;&nbsp;</a></span>RecvAck()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="serverx_8h.html#a937d4dd628a8858b443a399410d2600b">result</a> XOUT::RecvAck </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Считывание подтверждений. </p>
<p >Принимает подтверждение сообщения.</p>
<p >Функция принимает подтверждение сообщения через сокет fdxout. Если принято 0 байт, выводится предупреждение и возвращается результат Break. Если принято отрицательное количество байт, выводится ошибка. Если число принятых байт меньше размера подтверждения, возвращается результат Continue. Проверяется полученное подтверждение на соответствие ACK. Увеличивается счетчик подтвержденных сообщений cn_ack_out. Извлекается идентификатор сообщения из подтверждения. Ищется запись сообщения по идентификатору. Если запись сообщения найдена, останавливается таймер, освобождается запись сообщения и возвращается результат True. Если запись сообщения не найдена, возвращается результат Error.</p>
<dl class="section return"><dt>Возвращает</dt><dd>Результат операции: Break, Continue, True или Error. </dd></dl>

</div>
</div>
<a id="a0662e9eb15e9b457cd9876be62f56bd9" name="a0662e9eb15e9b457cd9876be62f56bd9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0662e9eb15e9b457cd9876be62f56bd9">&#9670;&nbsp;</a></span>SendMsg()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="serverx_8h.html#a937d4dd628a8858b443a399410d2600b">result</a> XOUT::SendMsg </td>
          <td>(</td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>msg</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Отправка сообщений. </p>
<p >Отправляет сообщение.</p>
<p >Функция отправляет сообщение, передавая массив msg и его размер size. Получает свободную запись сообщения с помощью функции <a class="el" href="classXOUT.html#ad746cbfd1da73fac6aac72d47821b5c8" title="Поиск свободной записи.">getfreerec()</a>. Заполняет структуру сообщения данными из массива msg. Устанавливает идентификатор сообщения и длину сообщения. Отправляет сообщение через сокет fdxout. Если отправка не удалась, возвращает ошибку и освобождает запись сообщения. Если отправка удалась, сохраняет идентификатор таймера на сообщение и запускает таймер статистики. Возвращает результат True.</p>
<dl class="params"><dt>Аргументы</dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>Массив сообщения. </td></tr>
    <tr><td class="paramname">size</td><td>Размер сообщения. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Возвращает</dt><dd>Результат операции: Error или True. </dd></dl>

</div>
</div>
<hr/>Объявления и описания членов классов находятся в файлах:<ul>
<li>/home/yvzayets/Документы/GitHub/server_thread-pattern-/<a class="el" href="serverx_8h_source.html">serverx.h</a></li>
<li>/home/yvzayets/Документы/GitHub/server_thread-pattern-/serverx.cpp</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Создано системой&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4
</small></address>
</body>
</html>
